{% extends "base.html" %}

{% block title %}
  {% if post %}
    Edit {{ post.title|title }}
  {% else %}
    Create Post
  {% endif %}
{% endblock %}

{% block navigation %}
  {% if post %}
    <li><a href="{{ url_for('posts.show', id=post.id) }}">Back to post</a></li>
  {% endif %}
{% endblock %}

{% block content %}
  {% with %}
  {% set title = post.title if post else '' %}
  {% set content = post.content if post else '' %}
  <form method="POST" action="" class="form-horizontal">
    <fieldset>
      <legend>
        {% if post %}
          Edit {{ post.title|title }}
        {% else %}
          Create Post
        {% endif %}
      </legend>
      <div class="control-group">
        <label class="control-label" for="title">Title:</label>
        <div class="controls">
          <input type="text" class="span10" name="title" value="{{ title }}">
        </div>
      </div>

      <div class="control-group">
        <label class="control-label" for="content">Content:</label>
        <div class="controls">
          <textarea class="span10" name="content">{{ content }}</textarea>
        </div>
      </div>

      <div class="form-actions">
        <button class="btn btn-primary" type="submit">Save</button>
      </div>
    </fieldset>
  </form>
  {% endwith %}
{% endblock %}
